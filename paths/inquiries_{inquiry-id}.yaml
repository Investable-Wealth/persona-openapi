delete:
  description: >-
    Permanently deletes personally identifiable information (PII) for an Inquiry
    and all associated Verifications and Reports. This action cannot be undone. 


    This endpoint can be used to comply with privacy regulations such as GDPR /
    CCPA or to enforce data privacy.
  operationId: redact-an-inquiry
  parameters:
    - $ref: ../components/parameters/keyInflectionHeader.yaml
    - $ref: ../components/parameters/idempotencyKeyHeader.yaml
    - $ref: ../components/parameters/personaVersionHeader.yaml
    - name: inquiry-id
      in: path
      required: true
      schema:
        type: string
  responses:
    '200':
      content:
        application/json:
          examples:
            Result:
              summary: OK
              $ref: ../components/examples/InquiryResponse.yaml
          schema:
            properties:
              data:
                $ref: ../components/schemas/Inquiry.yaml
            type: object
      description: OK
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '403':
      $ref: ../components/responses/Forbidden.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '409':
      $ref: ../components/responses/Conflict.yaml
    '422':
      $ref: ../components/responses/UnprocessableEntity.yaml
    '429':
      $ref: ../components/responses/TooManyRequests.yaml
  summary: Redact an Inquiry
  tags:
    - Inquiries
get:
  description: >-
    Retrieves the details of an inquiry that has previously been created.


    In the [Embedded Flow](doc:embedded-flow), the `inquiry-id` is the first
    parameter of the onStart callback. In the [Hosted Flow](doc:hosted-flow),
    the `inquiry-id` is a query parameter in the onComplete callback.


    Template information will be found in `data.relationships.inquiry-template`
    if the inquiry is a Dynamic Flow inquiry, and in
    `data.relationships.template` if the inquiry is a Legacy 2.0 inquiry. For
    more information, see [Dynamic Flow vs. Legacy
    Templates](doc:inquiry-templates#dynamic-flow-vs-legacy-templates).
  operationId: retrieve-an-inquiry
  parameters:
    - $ref: ../components/parameters/keyInflectionHeader.yaml
    - $ref: ../components/parameters/idempotencyKeyHeader.yaml
    - $ref: ../components/parameters/personaVersionHeader.yaml
    - name: inquiry-id
      in: path
      required: true
      schema:
        type: string
  responses:
    '200':
      content:
        application/json:
          examples:
            Result:
              summary: OK
              value:
                data:
                  type: inquiry
                  id: inq_zEx4jL84ShbUyuwX6AzPSqt6
                  attributes:
                    status: completed
                    reference-id: null
                    note: null
                    behaviors:
                      request-spoof-attempts: 0
                      user-agent-spoof-attempts: 0
                      distraction-events: 0
                      hesitation-baseline: 19860
                      hesitation-count: 1
                      hesitation-time: 12975
                      shortcut-copies: 0
                      shortcut-pastes: 0
                      autofill-cancels: 29
                      autofill-starts: 0
                      devtools-open: false
                      completion-time: 28.62633237
                      hesitation-percentage: 65.33232628398792
                      behavior-threat-level: low
                    tags:
                      - XYZ_CAMPAIGN
                    creator: creator@withpersona.com
                    reviewer-comment: null
                    created-at: '2019-11-15T05:27:24.000Z'
                    started-at: '2019-11-15T05:27:46.000Z'
                    completed-at: '2019-11-15T05:28:02.000Z'
                    failed-at: null
                    marked-for-review-at: null
                    decisioned-at: null
                    expired-at: null
                    redacted-at: null
                    previous-step-name: database_collection_form
                    next-step-name: success
                    name-first: null
                    name-middle: null
                    name-last: null
                    birthdate: null
                    address-street-1: null
                    address-street-2: null
                    address-city: null
                    address-subdivision: null
                    address-subdivision-abbr: null
                    address-postal-code: null
                    address-postal-code-abbr: null
                    social-security-number: null
                    identification-number: null
                    email-address: null
                    phone-number: null
                    fields:
                      name-first:
                        type: string
                        value: null
                      name-middle:
                        type: string
                        value: null
                      name-last:
                        type: string
                        value: null
                      address-street-1:
                        type: string
                        value: null
                      address-street-2:
                        type: string
                        value: null
                      address-city:
                        type: string
                        value: null
                      address-subdivision:
                        type: string
                        value: null
                      address-postal-code:
                        type: string
                        value: null
                      address-country-code:
                        type: string
                        value: null
                      birthdate:
                        type: date
                        value: null
                      email-address:
                        type: string
                        value: null
                      phone-number:
                        type: string
                        value: null
                      identification-number:
                        type: string
                        value: null
                  relationships:
                    account:
                      data:
                        type: account
                        id: act_n2uq9eKMboaCQzu9ALWYcVdN
                    template:
                      data: {}
                    inquiry-template:
                      data:
                        type: inquiry-template
                        id: itmpl_p8ANAJy9iqadm2buF2xcVgqH
                    inquiry-template-version:
                      data:
                        type: inquiry-template-version
                        id: itmplv_iXhqfNWqwYLAWs9G8Fm8hPfo
                    reviewer:
                      data: {}
                    reports:
                      data: []
                    verifications:
                      data:
                        - type: verification/database
                          id: ver_uHDiwtcx3htjajvEaeMjPQcE
                    sessions:
                      data:
                        - type: session
                          id: iqse_ov4ftVuCYm8U7rNkZADFpiBg
                    documents:
                      data: []
                    selfies:
                      data: []
                included:
                  - type: inquiry-session
                    id: iqse_TOKEN
                    attributes:
                      status: expired
                      created-at: '2023-07-25T04:15:20.000Z'
                      ip-address: 127.0.0.1
                      user-agent: >-
                        Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)
                        AppleWebKit/537.36 (KHTML, like Gecko) Chrome/115.0.0.0
                        Safari/537.36
                      os-name: Mac
                      os-full-version: 10.15.7
                      device-type: desktop
                      device-name: null
                      browser-name: Chrome
                      browser-full-version: 115.0.0.0
                      mobile-sdk-name: null
                      mobile-sdk-full-version: null
                      is-proxy: false
                      is-tor: false
                      is-datacenter: false
                      threat-level: low
                      country-code: US
                      country-name: United States
                      region-code: CA
                      region-name: California
                      latitude: 37.7688
                      longitude: -122.262
                    relationships:
                      inquiry:
                        data:
                          type: inquiry
                          id: inq_TOKEN
                  - type: inquiry-template
                    id: itmpl_TOKEN
                    attributes:
                      status: active
                      name: Twilio Desktop
                    relationships:
                      latest-published-version:
                        data:
                          type: inquiry-template-version
                          id: itmplv_TOKEN
          schema:
            properties:
              data:
                $ref: ../components/schemas/Inquiry.yaml
              included:
                type: array
                items:
                  discriminator:
                    propertyName: type
                    mapping:
                      report: ../components/schemas/ReportData.yaml
                      inquiry-template: ../components/schemas/InquiryTemplate.yaml
                      inquiry-session: ../components/schemas/InquirySession.yaml
                  anyOf:
                    - $ref: ../components/schemas/ReportData.yaml
                    - $ref: ../components/schemas/InquiryTemplate.yaml
                    - $ref: ../components/schemas/InquirySession.yaml
            type: object
      description: OK
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '403':
      $ref: ../components/responses/Forbidden.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '429':
      $ref: ../components/responses/TooManyRequests.yaml
  summary: Retrieve an Inquiry
  tags:
    - Inquiries
patch:
  description: Updates an existing inquiry.
  operationId: update-an-inquiry
  parameters:
    - $ref: ../components/parameters/keyInflectionHeader.yaml
    - $ref: ../components/parameters/idempotencyKeyHeader.yaml
    - $ref: ../components/parameters/personaVersionHeader.yaml
    - name: inquiry-id
      in: path
      required: true
      schema:
        type: string
  requestBody:
    content:
      application/json:
        schema:
          properties:
            data:
              properties:
                attributes:
                  allOf:
                    - $ref: ../components/schemas/DefaultFields.yaml
                    - type: object
                      properties:
                        identification-number:
                          default: '1231231234'
                          description: Identification numbers, i.e. SSN
                          type: string
                        locale:
                          type: string
                        note:
                          type: string
                        selected-country-code:
                          type: string
              type: object
          required:
            - data
          type: object
  responses:
    '200':
      content:
        application/json:
          examples:
            Result:
              summary: OK
              $ref: ../components/examples/InquiryResponse.yaml
          schema:
            properties:
              data:
                $ref: ../components/schemas/Inquiry.yaml
            type: object
      description: OK
    '400':
      $ref: ../components/responses/BadRequest.yaml
    '401':
      $ref: ../components/responses/Unauthorized.yaml
    '403':
      $ref: ../components/responses/Forbidden.yaml
    '404':
      $ref: ../components/responses/NotFound.yaml
    '409':
      $ref: ../components/responses/Conflict.yaml
    '422':
      $ref: ../components/responses/UnprocessableEntity.yaml
    '429':
      $ref: ../components/responses/TooManyRequests.yaml
  summary: Update an Inquiry
  tags:
    - Inquiries
